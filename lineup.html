<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Infinite Hunters ‚Äì Interview Line-Up</title>

<style>
body {
    font-family: "Times New Roman", Times, serif;
    background:#f2f4f7;
    padding:16px;
    margin:0;
}
.container {
    background:#fff;
    padding:16px;
    border-radius:6px;
    width:100%;
}
h2 {
    background:#0a3d62;
    color:#fff;
    padding:10px;
    font-size:20px;
    text-align:center;
    margin-bottom:12px;
}
.section h3 {
    font-size:17px;
    margin:14px 0 8px;
    border-bottom:2px solid navy;
    padding-bottom:4px;
    color: navy;
}
.grid {
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px 30px;
}
.field-box {
    display:flex;
    flex-direction:column;
    min-height:72px;
}
label {
    font-weight:bold;
    margin-bottom:4px;
    font-size:14px;
    color: navy;
}
input, select {
    height:38px;
    padding:6px 8px;
    font-size:14px;
    border:2px solid navy;
    border-radius:4px;
    width:100%;
    box-sizing:border-box;
}
.row {
    display:flex;
    gap:6px;
    align-items:center;
}
.add-btn {
    height:38px;
    padding:0 12px;
    background:#0a3d62;
    color:#fff;
    border:none;
    border-radius:4px;
    cursor:pointer;
    font-size:16px;
}
.counter-box {
    display:flex;
    gap:16px;
    margin-bottom:14px;
}
.counter {
    flex:1;
    min-height:90px;
    background:#0a3d62;
    border-radius:6px;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    color:#fff;
}
.submit-btn {
    margin:20px auto 0;
    display:block;
    width:220px;
    height:40px;
    background:#198754;
    color:#fff;
    border:none;
    font-size:15px;
    border-radius:4px;
    cursor:pointer;
}
.error {
    border-color:red !important;
}
.delete-btn {
    height:38px;
    padding:0 8px;
    background:red;
    color:#fff;
    border:none;
    border-radius:4px;
    cursor:pointer;
    font-size:16px;
}
</style>
</head>

<body>
  <nav style="background:#0a3d62;padding:10px;text-align:center;">
    <a href="/referral" style="color:white;margin:0 10px;">Referral</a>
    <a href="/lineup" style="color:white;margin:0 10px;">Lineup</a>
    <a href="/onboardingsample" style="color:white;margin:0 10px;">Onboarding</a>
    <a href="/onboarded-list" style="color:white;margin:0 10px;">Onboarded</a>
    <a href="/bank-change" style="color:white;margin:0 10px;">Bank Change</a>
    <a href="/logout" style="color:#ffd700;margin-left:20px;">Logout</a>
</nav>


<div class="container">
<h2>Interview Line-Up ‚Äì Admin Panel</h2>

<div class="counter-box">
    <div class="counter"><h3>Total Referrals</h3><p>30</p></div>
    <div class="counter"><h3>Interview Line-Up</h3><p>5</p></div>
    <div class="counter"><h3>Selected</h3><p>3</p></div>
    <div class="counter"><h3>Onboarded</h3><p>3</p></div>
</div>

<form method="POST" action="/save-lineup" onsubmit="return validateForm()">


<!-- Candidate Details -->
<div class="section">
<h3>Candidate Details</h3>
<div class="grid">

<div class="field-box">
<label>Candidate Name *</label>
<input type="text"
       id="candidateName"
       name="candidate_name"
       placeholder="Only letters allowed"
       oninput="validateName(this)"
       required>

</div>

<div class="field-box">
<label>Mobile Number *</label>
<input type="text"
       id="mobile"
       name="mobile"
       maxlength="10"
       placeholder="10 digit mobile number"
       oninput="validateMobile(this)"
       required>

</div>

<div class="field-box">
<label>Designation *</label>
<div class="row">
<select id="designation" name="designation" required>
<option value="">Select</option>
<option>Picker</option>
<option>Packer</option>
<option>Loader</option>
<option>Delivery Executive</option>
<option>Store Executive</option>
</select>
<button type="button" class="add-btn" onclick="addOption('designation','Designation')">+</button>
<button type="button" class="delete-btn" onclick="deleteOption('designation')">üóë</button>
</div>
</div>

</div>
</div>

<!-- Client & Location -->
<div class="section">
<h3>Client & Location</h3>
<div class="grid">

<div class="field-box">
<label>Client *</label>
<div class="row">
<select id="client" name="client" required>
<option value="">Select</option>
<option>Swiggy Instamart</option>
<option>Zepto Kirana Kart</option>
</select>
<button type="button" class="add-btn" onclick="addOption('client','Client')">+</button>
<button type="button" class="delete-btn" onclick="deleteOption('client')">üóë</button>
</div>
</div>

<div class="field-box">
<label>State *</label>
<div class="row">
<select id="state" name="state" required>
<option value="">Select</option>
<option>Tamil Nadu</option>
<option>Telangana</option>
</select>
<button type="button" class="add-btn" onclick="addOption('state','State')">+</button>
<button type="button" class="delete-btn" onclick="deleteOption('state')">üóë</button>
</div>
</div>

<div class="field-box">
<label>City *</label>
<div class="row">
<select id="city" name="city" required>
<option value="">Select</option>
<option>Chennai</option>
<option>Hyderabad</option>
</select>
<button type="button" class="add-btn" onclick="addOption('city','City')">+</button>
<button type="button" class="delete-btn" onclick="deleteOption('city')">üóë</button>
</div>
</div>

</div>
</div>

<!-- Interview Details -->
<div class="section">
<h3>Interview Details</h3>
<div class="grid">

<div class="field-box">
<label>Interview Date *</label>
<input type="date"
       id="interviewDate"
       name="interview_date"
       required>

</div>

<div class="field-box">
<label>Interview Time *</label>
<input type="time"
       id="interviewTime"
       name="interview_time"
       required>

</div>

<div class="field-box">
<label>Interview Mode *</label>
<div class="row">
<select id="interviewMode" name="interview_mode" required>
<option value="">Select</option>
<option>Walk-in</option>
<option>Telephonic</option>
<option>Video Call</option>
</select>
<button type="button" class="add-btn" onclick="addOption('interviewMode','Interview Mode')">+</button>
<button type="button" class="delete-btn" onclick="deleteOption('interviewMode')">üóë</button>
</div>
</div>

<div class="field-box">
<label>Interview Status *</label>
<div class="row">
<select id="interviewStatus" name="interview_status" required>
<option value="">Select</option>
<option>Interview Scheduled</option>
<option>Interview Completed</option>
<option>Selected</option>
<option>Rejected</option>
</select>
<button type="button" class="add-btn" onclick="addOption('interviewStatus','Interview Status')">+</button>
<button type="button" class="delete-btn" onclick="deleteOption('interviewStatus')">üóë</button>
</div>
</div>

</div>
</div>

<button type="submit" class="submit-btn">Save Interview Line-Up</button>
</form>
</div>
<script>
/* üîê Role-based access protection */


if (!user) {
    // Not logged in
    window.location.href = "/";
}

// Admin & Super Admin allowed
if (user.role !== "ADMIN" && user.role !== "SUPERADMIN") {
    alert("Access denied");
    window.location.href = "/";
}



function addOption(selectId, label) {
    let value = prompt("Enter new " + label);
    if (!value) return;
    value = value.trim();
    if (!/^[A-Za-z ]+$/.test(value)) { alert(label + " must contain only letters"); return; }

    let select = document.getElementById(selectId);
    for (let i = 0; i < select.options.length; i++) {
        if (select.options[i].value.toLowerCase() === value.toLowerCase()) {
            alert(label + " already exists"); return;
        }
    }
    let option = document.createElement("option");
    option.value = value; option.text = value;
    select.add(option); select.value = value;
}

function deleteOption(selectId) {
    let select = document.getElementById(selectId);
    if (select.selectedIndex <= 0) { alert("Select an item to delete"); return; }
    if (confirm("Are you sure you want to delete this entry?")) select.remove(select.selectedIndex);
}

function validateName(input) {
    const regex = /^[A-Za-z ]*$/;
    input.classList.toggle("error", !regex.test(input.value));
}

function validateMobile(input) {
    input.classList.toggle("error", !/^[0-9]{10}$/.test(input.value));
}

function validateForm() {
    if (document.querySelector(".error")) { alert("Please fix highlighted fields"); return false; }
    const requiredFields = ["candidateName","mobile","designation","client","state","city","interviewDate","interviewTime","interviewMode","interviewStatus"];
    for (let id of requiredFields) {
        const el = document.getElementById(id);
        if (!el.value) { el.classList.add("error"); alert("Please fill all required fields"); return false; }
    }
    alert("Form is valid. Ready to submit.");
    return true;
}

/* Disable past dates for Interview Date */
window.onload = function() {
    const today = new Date().toISOString().split("T")[0];
    document.getElementById("interviewDate").setAttribute("min", today);
};
</script>

</body>

</html>